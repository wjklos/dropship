<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropship</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>">
    <style>
@import"https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700&display=swap";:root{--vector-primary: #00ff88;--vector-secondary: #00cc66;--vector-highlight: #ffcc00;--vector-danger: #ff4444;--vector-warning: #ffaa00;--bg-deep: #000a04;--bg-screen: #001208;--hud-bg: rgba(0, 20, 10, .85);--hud-border: rgba(0, 255, 136, .3);--hud-text: #00ff88;--glow-primary: 0 0 10px #00ff88, 0 0 20px #00ff8866, 0 0 30px #00ff8833;--glow-highlight: 0 0 10px #ffcc00, 0 0 20px #ffcc0066;--glow-danger: 0 0 10px #ff4444, 0 0 20px #ff444466}*{box-sizing:border-box;margin:0;padding:0}html,body{width:100%;height:100%;overflow:hidden;background:var(--bg-deep)}body{font-family:Share Tech Mono,monospace;color:var(--vector-primary)}.app{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:radial-gradient(ellipse at center,var(--bg-screen) 0%,var(--bg-deep) 100%)}.game-container{position:relative;width:min(95vw,900px);aspect-ratio:4 / 3;background:var(--bg-screen);border:3px solid var(--vector-secondary);border-radius:20px;box-shadow:var(--glow-primary),inset 0 0 60px #00ff880d;overflow:hidden}.game-svg{width:100%;height:100%;display:block}.crt-overlay{position:absolute;inset:0;pointer-events:none;border-radius:17px;overflow:hidden}.scanlines{position:absolute;inset:0;background:repeating-linear-gradient(0deg,#0000 0px 1px,#0000004d 1px 2px);opacity:.4}.vignette{position:absolute;inset:0;background:radial-gradient(ellipse at center,transparent 50%,rgba(0,0,0,.5) 100%)}.flicker{position:absolute;inset:0;background:transparent;animation:flicker .15s infinite;opacity:.02}@keyframes flicker{0%,to{background:transparent}50%{background:#00ff8808}}.hud{position:absolute;inset:0;pointer-events:none;display:flex;flex-direction:column;padding:10px}.hud-top{background:var(--hud-bg);border:1px solid var(--hud-border);border-radius:4px;padding:8px 12px}.hud-title{font-family:Orbitron,sans-serif;font-size:10px;letter-spacing:2px;color:var(--vector-secondary);margin-bottom:8px;text-align:center}.hud-row{display:flex;justify-content:space-between;gap:15px}.telemetry-block{display:flex;flex-direction:column;align-items:center;min-width:70px}.telemetry-block .label{font-size:9px;letter-spacing:1px;color:var(--vector-secondary);margin-bottom:2px}.telemetry-block .value{font-size:20px;font-weight:700;text-shadow:var(--glow-primary)}.telemetry-block .unit{font-size:8px;color:var(--vector-secondary)}.seven-segment{font-family:Orbitron,sans-serif}.value.ok{color:var(--vector-primary);text-shadow:var(--glow-primary)}.value.warning{color:var(--vector-warning);text-shadow:var(--glow-highlight)}.value.danger{color:var(--vector-danger);text-shadow:var(--glow-danger)}.telemetry-block.fuel{min-width:100px}.fuel-bar{width:80px;height:12px;border:1px solid var(--vector-secondary);border-radius:2px;overflow:hidden;margin:4px 0}.fuel-fill{height:100%;transition:width .1s;box-shadow:var(--glow-primary)}.fuel-fill.ok{background:var(--vector-primary)}.fuel-fill.warning{background:var(--vector-warning)}.fuel-fill.danger{background:var(--vector-danger)}.hud-status{margin-top:auto;margin-bottom:5px}.status-row{display:flex;justify-content:center;gap:20px}.indicator{display:flex;align-items:center;gap:6px;font-size:10px;letter-spacing:1px;color:var(--vector-secondary);opacity:.5}.indicator.active,.indicator.ok{color:var(--vector-primary);opacity:1}.indicator.warning{color:var(--vector-warning);opacity:1}.indicator .dot{width:8px;height:8px;border-radius:50%;background:currentColor;box-shadow:0 0 6px currentColor}.hud-autopilot{position:absolute;top:70px;right:10px;background:var(--hud-bg);border:1px solid var(--hud-border);border-radius:4px;padding:8px}.autopilot-label{font-size:9px;letter-spacing:1px;color:var(--vector-secondary);margin-bottom:6px;text-align:center}.autopilot-modes{display:flex;flex-direction:column;gap:4px}.mode-btn{background:transparent;border:1px solid var(--hud-border);color:var(--vector-secondary);font-family:Share Tech Mono,monospace;font-size:10px;padding:4px 8px;cursor:pointer;pointer-events:auto;transition:all .2s}.mode-btn:hover{border-color:var(--vector-primary);color:var(--vector-primary)}.mode-btn.active{background:#0f83;border-color:var(--vector-primary);color:var(--vector-primary);text-shadow:var(--glow-primary)}.message{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;padding:30px 50px;background:var(--hud-bg);border:2px solid;border-radius:8px}.message.crash{border-color:var(--vector-danger);box-shadow:var(--glow-danger)}.message.success{border-color:var(--vector-primary);box-shadow:var(--glow-primary)}.message-title{font-family:Orbitron,sans-serif;font-size:24px;font-weight:700;margin-bottom:8px}.crash .message-title{color:var(--vector-danger);text-shadow:var(--glow-danger)}.success .message-title{color:var(--vector-primary);text-shadow:var(--glow-primary)}.message-subtitle{font-size:14px;color:var(--vector-secondary);margin-bottom:15px}.message-hint{font-size:12px;color:var(--vector-secondary);opacity:.7}.hud-controls{position:absolute;bottom:10px;left:50%;transform:translate(-50%);display:flex;gap:15px;font-size:10px;color:var(--vector-secondary);opacity:.6}.lander-body{--vector-primary: #00ff88}.thrust-flame{opacity:.9}@media(max-width:600px){.hud-row{flex-wrap:wrap;justify-content:center}.telemetry-block .value{font-size:16px}.hud-controls{flex-wrap:wrap;justify-content:center;gap:8px}.hud-autopilot{top:auto;bottom:50px;right:50%;transform:translate(50%)}.autopilot-modes{flex-direction:row}}
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="module">
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();const Qe=!1,Xe=(e,t)=>e===t,Je=Symbol("solid-track"),te={equals:Xe};let Ie=Ue;const B=1,ne=2,_e={owned:null,cleanups:null,context:null,owner:null};var $=null;let ae=null,et=null,A=null,P=null,D=null,se=0;function ee(e,t){const n=A,r=$,i=e.length===0,l=t===void 0?r:t,a=i?_e:{owned:null,cleanups:null,context:l?l.context:null,owner:l},o=i?e:()=>e(()=>U(()=>Z(a)));$=a,A=null;try{return Q(o,!0)}finally{A=n,$=r}}function N(e,t){t=t?Object.assign({},te,t):te;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Ge(n,i));return[Re.bind(n),r]}function R(e,t,n){const r=ce(e,t,!1,B);W(r)}function tt(e,t,n){Ie=rt;const r=ce(e,t,!1,B);r.user=!0,D?D.push(r):W(r)}function k(e,t,n){n=n?Object.assign({},te,n):te;const r=ce(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,W(r),Re.bind(r)}function U(e){if(A===null)return e();const t=A;A=null;try{return e()}finally{A=t}}function nt(e){tt(()=>U(e))}function De(e){return $===null||($.cleanups===null?$.cleanups=[e]:$.cleanups.push(e)),e}function Re(){if(this.sources&&this.state)if(this.state===B)W(this);else{const e=P;P=null,Q(()=>le(this),!1),P=e}if(A){const e=this.observers?this.observers.length:0;A.sources?(A.sources.push(this),A.sourceSlots.push(e)):(A.sources=[this],A.sourceSlots=[e]),this.observers?(this.observers.push(A),this.observerSlots.push(A.sources.length-1)):(this.observers=[A],this.observerSlots=[A.sources.length-1])}return this.value}function Ge(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Q(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i],a=ae&&ae.running;a&&ae.disposed.has(l),(a?!l.tState:!l.state)&&(l.pure?P.push(l):D.push(l),l.observers&&Be(l)),a||(l.state=B)}if(P.length>1e6)throw P=[],new Error},!1)),t}function W(e){if(!e.fn)return;Z(e);const t=se;it(e,e.value,t)}function it(e,t,n){let r;const i=$,l=A;A=$=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=B,e.owned&&e.owned.forEach(Z),e.owned=null),e.updatedAt=n+1,Ve(a)}finally{A=l,$=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ge(e,r):e.value=r,e.updatedAt=n)}function ce(e,t,n,r=B,i){const l={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:$,context:$?$.context:null,pure:n};return $===null||$!==_e&&($.owned?$.owned.push(l):$.owned=[l]),l}function ie(e){if(e.state===0)return;if(e.state===ne)return le(e);if(e.suspense&&U(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<se);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===B)W(e);else if(e.state===ne){const r=P;P=null,Q(()=>le(e,t[0]),!1),P=r}}function Q(e,t){if(P)return e();let n=!1;t||(P=[]),D?n=!0:D=[],se++;try{const r=e();return lt(n),r}catch(r){n||(D=null),P=null,Ve(r)}}function lt(e){if(P&&(Ue(P),P=null),e)return;const t=D;D=null,t.length&&Q(()=>Ie(t),!1)}function Ue(e){for(let t=0;t<e.length;t++)ie(e[t])}function rt(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:ie(r)}for(t=0;t<n;t++)ie(e[t])}function le(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===B?r!==t&&(!r.updatedAt||r.updatedAt<se)&&ie(r):i===ne&&le(r,t)}}}function Be(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=ne,n.pure?P.push(n):D.push(n),n.observers&&Be(n))}}function Z(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const l=i.pop(),a=n.observerSlots.pop();r<i.length&&(l.sourceSlots[a]=r,i[r]=l,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Z(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function st(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Ve(e,t=$){throw st(e)}const ot=Symbol("fallback");function Pe(e){for(let t=0;t<e.length;t++)e[t]()}function at(e,t,n={}){let r=[],i=[],l=[],a=0,o=t.length>1?[]:null;return De(()=>Pe(l)),()=>{let d=e()||[],f=d.length,u,s;return d[Je],U(()=>{let c,h,g,m,b,y,S,M,E;if(f===0)a!==0&&(Pe(l),l=[],r=[],i=[],a=0,o&&(o=[])),n.fallback&&(r=[ot],i[0]=ee(O=>(l[0]=O,n.fallback())),a=1);else if(a===0){for(i=new Array(f),s=0;s<f;s++)r[s]=d[s],i[s]=ee(v);a=f}else{for(g=new Array(f),m=new Array(f),o&&(b=new Array(f)),y=0,S=Math.min(a,f);y<S&&r[y]===d[y];y++);for(S=a-1,M=f-1;S>=y&&M>=y&&r[S]===d[M];S--,M--)g[M]=i[S],m[M]=l[S],o&&(b[M]=o[S]);for(c=new Map,h=new Array(M+1),s=M;s>=y;s--)E=d[s],u=c.get(E),h[s]=u===void 0?-1:u,c.set(E,s);for(u=y;u<=S;u++)E=r[u],s=c.get(E),s!==void 0&&s!==-1?(g[s]=i[u],m[s]=l[u],o&&(b[s]=o[u]),s=h[s],c.set(E,s)):l[u]();for(s=y;s<f;s++)s in g?(i[s]=g[s],l[s]=m[s],o&&(o[s]=b[s],o[s](s))):i[s]=ee(v);i=i.slice(0,a=f),r=d.slice(0)}return i});function v(c){if(l[s]=c,o){const[h,g]=N(s);return o[s]=g,t(d[s],h)}return t(d[s])}}}function I(e,t){return U(()=>e(t||{}))}const dt=e=>`Stale read from <${e}>.`;function ut(e){const t="fallback"in e&&{fallback:()=>e.fallback};return k(at(()=>e.each,e.children,t||void 0))}function de(e){const t=e.keyed,n=k(()=>e.when,void 0,void 0),r=t?n:k(n,void 0,{equals:(i,l)=>!i==!l});return k(()=>{const i=r();if(i){const l=e.children;return typeof l=="function"&&l.length>0?U(()=>l(t?i:()=>{if(!U(r))throw dt("Show");return n()})):l}return e.fallback},void 0,void 0)}function ct(e,t,n){let r=n.length,i=t.length,l=r,a=0,o=0,d=t[i-1].nextSibling,f=null;for(;a<i||o<l;){if(t[a]===n[o]){a++,o++;continue}for(;t[i-1]===n[l-1];)i--,l--;if(i===a){const u=l<r?o?n[o-1].nextSibling:n[l-o]:d;for(;o<l;)e.insertBefore(n[o++],u)}else if(l===o)for(;a<i;)(!f||!f.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[l-1]&&n[o]===t[i-1]){const u=t[--i].nextSibling;e.insertBefore(n[o++],t[a++].nextSibling),e.insertBefore(n[--l],u),t[i]=n[l]}else{if(!f){f=new Map;let s=o;for(;s<l;)f.set(n[s],s++)}const u=f.get(t[a]);if(u!=null)if(o<u&&u<l){let s=a,v=1,c;for(;++s<i&&s<l&&!((c=f.get(t[s]))==null||c!==u+v);)v++;if(v>u-o){const h=t[a];for(;o<u;)e.insertBefore(n[o++],h)}else e.replaceChild(n[o++],t[a++])}else a++;else t[a++].remove()}}}function ft(e,t,n,r={}){let i;return ee(l=>{i=l,t===document?e():L(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function _(e,t,n,r){let i;const l=()=>{const o=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return o.innerHTML=e,n?o.content.firstChild.firstChild:r?o.firstChild:o.content.firstChild},a=t?()=>U(()=>document.importNode(i||(i=l()),!0)):()=>(i||(i=l())).cloneNode(!0);return a.cloneNode=a,a}function w(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function T(e,t){t==null?e.removeAttribute("class"):e.className=t}function ht(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function L(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return re(e,t,r,n);R(i=>re(e,t(),i,n),r)}function re(e,t,n,r,i){for(;typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(l==="number"&&(t=t.toString(),t===n))return n;if(a){let o=n[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=Y(e,n,r,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean")n=Y(e,n,r);else{if(l==="function")return R(()=>{let o=t();for(;typeof o=="function";)o=o();n=re(e,o,n,r)}),()=>n;if(Array.isArray(t)){const o=[],d=n&&Array.isArray(n);if(ue(o,t,n,i))return R(()=>n=re(e,o,n,r,!0)),()=>n;if(o.length===0){if(n=Y(e,n,r),a)return n}else d?n.length===0?Te(e,o,r):ct(e,n,o):(n&&Y(e),Te(e,o));n=o}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=Y(e,n,r,t);Y(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function ue(e,t,n,r){let i=!1;for(let l=0,a=t.length;l<a;l++){let o=t[l],d=n&&n[e.length],f;if(!(o==null||o===!0||o===!1))if((f=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=ue(e,o,d)||i;else if(f==="function")if(r){for(;typeof o=="function";)o=o();i=ue(e,Array.isArray(o)?o:[o],Array.isArray(d)?d:[d])||i}else e.push(o),i=!0;else{const u=String(o);d&&d.nodeType===3&&d.data===u?e.push(d):e.push(document.createTextNode(u))}}return i}function Te(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Y(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let l=!1;for(let a=t.length-1;a>=0;a--){const o=t[a];if(i!==o){const d=o.parentNode===e;!l&&!a?d?e.replaceChild(i,o):e.insertBefore(i,n):d&&o.remove()}else l=!0}}else e.insertBefore(i,n);return[i]}function Oe(e,t,n=.6,r=7){const i=t*.75;let l=[{x:0,y:i},{x:e,y:i}],a=t*.3;for(let c=0;c<r;c++){const h=[];for(let g=0;g<l.length-1;g++){const m=l[g],b=l[g+1];h.push(m);const y=(m.x+b.x)/2,S=(m.y+b.y)/2+(Math.random()-.5)*a,M=Math.max(t*.5,Math.min(t*.95,S));h.push({x:y,y:M})}h.push(l[l.length-1]),l=h,a*=n}const o=80,d=e*.3+Math.random()*e*.4,f=d+o;let u=0,s=0;for(const c of l)c.x>=d&&c.x<=f&&(u+=c.y,s++);return u=s>0?u/s:i,l=l.map(c=>{if(c.x>=d-10&&c.x<=f+10){if(c.x>=d&&c.x<=f)return{...c,y:u};const g=(c.x<d?d-c.x:c.x-f)/10;return{...c,y:c.y*g+u*(1-g)}}return c}),{terrain:l,landingPad:{x1:d,x2:f,y:u}}}function gt(e,t,n){if(e.length===0)return"";let r=`M 0 ${n}`;r+=` L ${e[0].x} ${e[0].y}`;for(let i=1;i<e.length;i++)r+=` L ${e[i].x} ${e[i].y}`;return r+=` L ${t} ${n}`,r+=" Z",r}function vt(e,t,n=50){const r=[];for(let i=0;i<n;i++)r.push({x:Math.random()*e,y:Math.random()*t*.6,size:Math.random()*2+.5,brightness:Math.random()*.5+.5});return r}function yt(e,t,n,r,i){if(!e.alive||e.landed)return e;const l={...e,position:{...e.position},velocity:{...e.velocity}};for(l.angularVelocity+=r*t.rotationSpeed*i,l.angularVelocity*=.95,l.rotation+=l.angularVelocity*i;l.rotation>Math.PI;)l.rotation-=2*Math.PI;for(;l.rotation<-Math.PI;)l.rotation+=2*Math.PI;const a=l.fuel>0?n*t.maxThrust:0;l.thrust=a/t.maxThrust,a>0&&(l.fuel=Math.max(0,l.fuel-t.fuelConsumption*n*i));const o={x:-Math.sin(l.rotation)*a,y:-Math.cos(l.rotation)*a};return l.velocity.x+=o.x*i,l.velocity.y+=(o.y+t.gravity)*i,l.position.x+=l.velocity.x*i,l.position.y+=l.velocity.y*i,l.position.x<0&&(l.position.x+=t.width),l.position.x>t.width&&(l.position.x-=t.width),l}function mt(e,t,n,r){const i=e.position.x,l=e.position.y,a=Fe(t,i,r.width);if(l+15<a)return{collision:!1,landed:!1,terrainY:a};const d=i>=n.x1&&i<=n.x2,f=Math.sqrt(e.velocity.x**2+e.velocity.y**2),u=Math.abs(e.rotation)<r.maxLandingAngle,s=f<r.maxLandingVelocity;return d&&u&&s?{collision:!0,landed:!0,terrainY:a}:{collision:!0,landed:!1,terrainY:a}}function Fe(e,t,n){for(let r=0;r<e.length-1;r++){const i=e[r],l=e[r+1];if(t>=i.x&&t<=l.x){const a=(t-i.x)/(l.x-i.x);return i.y+a*(l.y-i.y)}}return e[e.length-1].y}function wt(e){return Math.sqrt(e.x**2+e.y**2)}function He(e,t,n){return Fe(t,e.x)-e.y-15}const xt={width:800,height:600,gravity:20,maxThrust:60,rotationSpeed:4,fuelConsumption:8,maxLandingVelocity:15,maxLandingAngle:.3};function Ne(e){return{position:{x:e.width*.2+Math.random()*e.width*.6,y:50},velocity:{x:(Math.random()-.5)*20,y:5},rotation:(Math.random()-.5)*.5,angularVelocity:0,fuel:100,thrust:0,alive:!0,landed:!1}}function bt(){const e=xt,t=Oe(e.width,e.height),n=vt(e.width,e.height),[r,i]=N(Ne(e)),[l,a]=N(t.terrain),[o,d]=N(t.landingPad),[f]=N(n),[u,s]=N({thrust:!1,rotateLeft:!1,rotateRight:!1}),[v,c]=N("off"),[h,g]=N(0),[m,b]=N(!1),[y,S]=N(!1),M=k(()=>He(r().position,l(),e.width)),E=k(()=>wt(r().velocity)),O=k(()=>r().velocity.y),G=k(()=>r().velocity.x),V=k(()=>{const C=r(),p=o();return C.position.x>=p.x1&&C.position.x<=p.x2}),z=k(()=>{const C=r(),p=Math.abs(C.rotation)<e.maxLandingAngle,q=E()<e.maxLandingVelocity;return{angleOk:p,speedOk:q,canLand:p&&q&&V()}});function F(){const C=Oe(e.width,e.height);a(C.terrain),d(C.landingPad),i(Ne(e)),g(0),S(!1),b(!1),c("off")}function H(C){switch(C){case" ":case"ArrowUp":case"w":s(p=>({...p,thrust:!0}));break;case"ArrowLeft":case"a":s(p=>({...p,rotateLeft:!0}));break;case"ArrowRight":case"d":s(p=>({...p,rotateRight:!0}));break;case"p":b(p=>!p);break;case"r":F();break;case"1":c("off");break;case"2":c("stabilize");break;case"3":c("land");break;case"0":c("demo");break}}function K(C){switch(C){case" ":case"ArrowUp":case"w":s(p=>({...p,thrust:!1}));break;case"ArrowLeft":case"a":s(p=>({...p,rotateLeft:!1}));break;case"ArrowRight":case"d":s(p=>({...p,rotateRight:!1}));break}}return{lander:r,setLander:i,terrain:l,landingPad:o,stars:f,input:u,autopilotMode:v,setAutopilotMode:c,gameTime:h,setGameTime:g,paused:m,setPaused:b,gameOver:y,setGameOver:S,config:e,altitude:M,speed:E,verticalSpeed:O,horizontalSpeed:G,isLandingZone:V,landingStatus:z,reset:F,handleKeyDown:H,handleKeyUp:K}}const j={attitude:{kp:3,kd:2},horizontal:{kp:.02},vertical:{kp:.5}};function St(e){return e>500?40:e>200?25:e>100?15:e>50?8:e>20?4:2}function kt(e,t,n,r,i){const l=He(e.position,t,r.width),a=i==="stabilize"?e.position.x:(n.x1+n.x2)/2;let o=0;if(i!=="stabilize"){const y=a-e.position.x;let S=y;Math.abs(y)>r.width/2&&(S=y>0?y-r.width:y+r.width);const E=Math.max(-30,Math.min(30,j.horizontal.kp*S*100))-e.velocity.x,O=l>100?1:l/100;o=Math.max(-.4,Math.min(.4,E*.02*O))}const d=o-e.rotation,f=j.attitude.kp*d-j.attitude.kd*e.angularVelocity,u=Math.max(-1,Math.min(1,f)),s=St(l),v=e.velocity.y,c=v-s,h=r.gravity/r.maxThrust,g=1/Math.max(.5,Math.cos(e.rotation));let m=h*g;c>0?m+=j.vertical.kp*c:c<-5&&(m-=.1),l<50&&v>5&&(m+=.3),l<20&&v>3&&(m=1);const b=Math.max(0,Math.min(1,m));return Math.abs(e.rotation)>.5?{thrust:Math.max(.3,b),rotation:u}:{thrust:b,rotation:u}}function pt(e){const t=-e.rotation,n=j.attitude.kp*t-j.attitude.kd*e.angularVelocity;return{thrust:0,rotation:Math.max(-1,Math.min(1,n))}}var At=_('<svg><g class=thrust-flame><polygon fill=none stroke="rgba(255, 150, 50, 0.3)"stroke-width=8 filter=url(#glow)></polygon><polygon fill=none stroke="rgba(255, 200, 100, 0.6)"stroke-width=4 filter=url(#glow)></polygon><polygon fill=none stroke="rgba(255, 255, 200, 0.9)"stroke-width=2 filter=url(#glow)></svg>',!1,!0,!1),Mt=_('<svg><g class=lander><g class=lander-body filter=url(#glow)><polygon points="-12,-8 12,-8 15,5 -15,5"fill=none stroke=var(--vector-primary) stroke-width=2></polygon><polygon points="-8,-8 8,-8 6,-18 -6,-18"fill=none stroke=var(--vector-primary) stroke-width=2></polygon><polygon points="-3,-18 3,-18 2,-22 -2,-22"fill=none stroke=var(--vector-primary) stroke-width=1.5></polygon><line x1=-12 y1=5 x2=-20 y2=15 stroke=var(--vector-primary) stroke-width=2></line><line x1=-22 y1=15 x2=-18 y2=15 stroke=var(--vector-primary) stroke-width=2></line><line x1=12 y1=5 x2=20 y2=15 stroke=var(--vector-primary) stroke-width=2></line><line x1=18 y1=15 x2=22 y2=15 stroke=var(--vector-primary) stroke-width=2></line><polygon points="-4,5 4,5 3,10 -3,10"fill=none stroke=var(--vector-primary) stroke-width=1.5></polygon><line x1=-15 y1=-2 x2=-18 y2=-2 stroke=var(--vector-primary) stroke-width=1></line><line x1=15 y1=-2 x2=18 y2=-2 stroke=var(--vector-primary) stroke-width=1></svg>',!1,!0,!1);const $t=e=>{const t=k(()=>{const l=20*e.lander.thrust,a=Math.random()*5*e.lander.thrust;return 15+l+a}),n=k(()=>6+8*e.lander.thrust),r=k(()=>{const{x:i,y:l}=e.lander.position,a=e.lander.rotation*(180/Math.PI);return`translate(${i}, ${l}) rotate(${a})`});return(()=>{var i=Mt(),l=i.firstChild;return L(i,I(de,{get when(){return e.lander.thrust>0},get children(){var a=At(),o=a.firstChild,d=o.nextSibling,f=d.nextSibling;return R(u=>{var s=`
              -${n()*.8},0
              0,${t()*1.2}
              ${n()*.8},0
            `,v=`
              -${n()*.6},0
              0,${t()}
              ${n()*.6},0
            `,c=`
              -${n()*.3},2
              0,${t()*.7}
              ${n()*.3},2
            `;return s!==u.e&&w(o,"points",u.e=s),v!==u.t&&w(d,"points",u.t=v),c!==u.a&&w(f,"points",u.a=c),u},{e:void 0,t:void 0,a:void 0}),a}}),l),R(()=>w(i,"transform",r())),i})()};var Ct=_('<svg><g class=terrain><path fill="rgba(0, 80, 40, 0.3)"stroke=none></path><path fill=none stroke=var(--vector-primary) stroke-width=2 stroke-linecap=round stroke-linejoin=round filter=url(#glow)></path><g class=landing-pad><line stroke=var(--vector-highlight) stroke-width=4 stroke-linecap=round filter=url(#glow-highlight)></line><line stroke=var(--vector-highlight) stroke-width=2 filter=url(#glow-highlight)></line><line stroke=var(--vector-highlight) stroke-width=2 filter=url(#glow-highlight)></line><line stroke=var(--vector-highlight) stroke-width=2 filter=url(#glow-highlight)></svg>',!1,!0,!1);const Et=e=>{const t=k(()=>gt(e.terrain,e.width,e.height)),n=k(()=>{if(e.terrain.length===0)return"";let r=`M ${e.terrain[0].x} ${e.terrain[0].y}`;for(let i=1;i<e.terrain.length;i++)r+=` L ${e.terrain[i].x} ${e.terrain[i].y}`;return r});return(()=>{var r=Ct(),i=r.firstChild,l=i.nextSibling,a=l.nextSibling,o=a.firstChild,d=o.nextSibling,f=d.nextSibling,u=f.nextSibling;return R(s=>{var v=t(),c=n(),h=e.landingPad.x1,g=e.landingPad.y,m=e.landingPad.x2,b=e.landingPad.y,y=e.landingPad.x1,S=e.landingPad.y,M=e.landingPad.x1,E=e.landingPad.y-10,O=e.landingPad.x2,G=e.landingPad.y,V=e.landingPad.x2,z=e.landingPad.y-10,F=(e.landingPad.x1+e.landingPad.x2)/2,H=e.landingPad.y-15,K=(e.landingPad.x1+e.landingPad.x2)/2,C=e.landingPad.y-5;return v!==s.e&&w(i,"d",s.e=v),c!==s.t&&w(l,"d",s.t=c),h!==s.a&&w(o,"x1",s.a=h),g!==s.o&&w(o,"y1",s.o=g),m!==s.i&&w(o,"x2",s.i=m),b!==s.n&&w(o,"y2",s.n=b),y!==s.s&&w(d,"x1",s.s=y),S!==s.h&&w(d,"y1",s.h=S),M!==s.r&&w(d,"x2",s.r=M),E!==s.d&&w(d,"y2",s.d=E),O!==s.l&&w(f,"x1",s.l=O),G!==s.u&&w(f,"y1",s.u=G),V!==s.c&&w(f,"x2",s.c=V),z!==s.w&&w(f,"y2",s.w=z),F!==s.m&&w(u,"x1",s.m=F),H!==s.f&&w(u,"y1",s.f=H),K!==s.y&&w(u,"x2",s.y=K),C!==s.g&&w(u,"y2",s.g=C),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),r})()};var Lt=_('<div class="message crash"><div class=message-title>CONTACT LIGHT</div><div class=message-subtitle>MISSION FAILED</div><div class=message-hint>Press [R] to restart'),Pt=_('<div class="message success"><div class=message-title>THE EAGLE HAS LANDED</div><div class=message-subtitle>TRANQUILITY BASE HERE</div><div class=message-hint>Press [R] for new mission'),Tt=_('<div class=hud><div class=hud-top><div class=hud-title>LUNAR MODULE DESCENT GUIDANCE</div><div class=hud-row><div class=telemetry-block><div class=label>ALTITUDE</div><div class="value seven-segment"></div><div class=unit>M</div></div><div class=telemetry-block><div class=label>V/SPEED</div><div></div><div class=unit>M/S</div></div><div class=telemetry-block><div class=label>H/SPEED</div><div class="value seven-segment"></div><div class=unit>M/S</div></div><div class=telemetry-block><div class=label>ANGLE</div><div>¬∞</div></div><div class="telemetry-block fuel"><div class=label>FUEL</div><div class=fuel-bar><div></div></div><div>%</div></div></div></div><div class=hud-status><div class=status-row><div><span class=dot></span> LANDING ZONE</div><div><span class=dot></span> VEL </div><div><span class=dot></span> ATT </div></div></div><div class=hud-autopilot><div class=autopilot-label>AUTOPILOT</div><div class=autopilot-modes><button data-key=1>[1] OFF</button><button data-key=2>[2] STAB</button><button data-key=3>[3] LAND</button><button data-key=0>[0] DEMO</button></div></div><div class=hud-controls><span>[‚Üë/W/SPACE] Thrust</span><span>[‚Üê/A] [‚Üí/D] Rotate</span><span>[P] Pause</span><span>[R] Reset');const Ot=e=>{const t=k(()=>Math.round(e.fuel)),n=k(()=>Math.max(0,Math.round(e.altitude))),r=k(()=>e.verticalSpeed.toFixed(1)),i=k(()=>e.horizontalSpeed.toFixed(1)),l=k(()=>Math.round(e.rotation*(180/Math.PI))),a=k(()=>e.fuel>50?"ok":e.fuel>20?"warning":"danger"),o=k(()=>e.verticalSpeed<10?"ok":e.verticalSpeed<15?"warning":"danger");return(()=>{var d=Tt(),f=d.firstChild,u=f.firstChild,s=u.nextSibling,v=s.firstChild,c=v.firstChild,h=c.nextSibling,g=v.nextSibling,m=g.firstChild,b=m.nextSibling,y=g.nextSibling,S=y.firstChild,M=S.nextSibling,E=y.nextSibling,O=E.firstChild,G=O.nextSibling,V=G.firstChild,z=E.nextSibling,F=z.firstChild,H=F.nextSibling,K=H.firstChild,C=H.nextSibling,p=C.firstChild,q=f.nextSibling,ze=q.firstChild,fe=ze.firstChild,X=fe.nextSibling,Ye=X.firstChild;Ye.nextSibling;var oe=X.nextSibling,je=oe.firstChild;je.nextSibling;var he=q.nextSibling,qe=he.firstChild,Ze=qe.nextSibling,ge=Ze.firstChild,ve=ge.nextSibling,ye=ve.nextSibling,We=ye.nextSibling,me=he.nextSibling;return L(h,n),L(b,r),L(M,i),L(G,l,V),L(C,t,p),L(X,()=>e.landingStatus.speedOk?"OK":"HIGH",null),L(oe,()=>e.landingStatus.angleOk?"OK":"CHECK",null),L(d,I(de,{get when(){return!e.alive},get children(){return Lt()}}),me),L(d,I(de,{get when(){return e.landed},get children(){return Pt()}}),me),R(x=>{var we=`value seven-segment ${o()}`,xe=`value seven-segment ${e.landingStatus.angleOk?"ok":"danger"}`,be=`fuel-fill ${a()}`,Se=`${t()}%`,ke=`value ${a()}`,pe=`indicator ${e.isLandingZone?"active":""}`,Ae=`indicator ${e.landingStatus.speedOk?"ok":"warning"}`,Me=`indicator ${e.landingStatus.angleOk?"ok":"warning"}`,$e=`mode-btn ${e.autopilotMode==="off"?"active":""}`,Ce=`mode-btn ${e.autopilotMode==="stabilize"?"active":""}`,Ee=`mode-btn ${e.autopilotMode==="land"?"active":""}`,Le=`mode-btn ${e.autopilotMode==="demo"?"active":""}`;return we!==x.e&&T(b,x.e=we),xe!==x.t&&T(G,x.t=xe),be!==x.a&&T(K,x.a=be),Se!==x.o&&ht(K,"width",x.o=Se),ke!==x.i&&T(C,x.i=ke),pe!==x.n&&T(fe,x.n=pe),Ae!==x.s&&T(X,x.s=Ae),Me!==x.h&&T(oe,x.h=Me),$e!==x.r&&T(ge,x.r=$e),Ce!==x.d&&T(ve,x.d=Ce),Ee!==x.l&&T(ye,x.l=Ee),Le!==x.u&&T(We,x.u=Le),x},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),d})()};var Nt=_("<div class=crt-overlay><div class=scanlines></div><div class=vignette></div><div class=flicker>");const It=()=>Nt();var _t=_('<div class=game-container><svg class=game-svg preserveAspectRatio="xMidYMid meet"><defs><filter id=glow x=-50% y=-50% width=200% height=200%><feGaussianBlur stdDeviation=2 result=blur></feGaussianBlur><feComposite in=SourceGraphic in2=blur operator=over></feComposite></filter><filter id=glow-highlight x=-50% y=-50% width=200% height=200%><feGaussianBlur stdDeviation=3 result=blur></feGaussianBlur><feComposite in=SourceGraphic in2=blur operator=over></feComposite></filter><filter id=glow-strong x=-100% y=-100% width=300% height=300%><feGaussianBlur stdDeviation=4 result=blur></feGaussianBlur><feMerge><feMergeNode in=blur></feMergeNode><feMergeNode in=blur></feMergeNode><feMergeNode in=SourceGraphic></feMergeNode></feMerge></filter></defs><g class=stars>'),Dt=_("<svg><circle></svg>",!1,!0,!1);const J=1/60,Rt=()=>{const e=bt();let t,n=0,r=0;const i=d=>{n===0&&(n=d);const f=Math.min((d-n)/1e3,.1);if(n=d,!e.paused()&&!e.gameOver())for(r+=f;r>=J;)l(J),r-=J,e.setGameTime(u=>u+J);t=requestAnimationFrame(i)},l=d=>{const f=e.lander(),u=e.input(),s=e.autopilotMode();if(!f.alive||f.landed)return;let v=0,c=0;if(s!=="off"){const m=s==="stabilize"?pt(f):kt(f,e.terrain(),e.landingPad(),e.config,s);s==="stabilize"?(v=u.thrust?1:0,c=m.rotation):(v=m.thrust,c=m.rotation)}else v=u.thrust?1:0,c=(u.rotateLeft?-1:0)+(u.rotateRight?1:0);const h=yt(f,e.config,v,c,d),g=mt(h,e.terrain(),e.landingPad(),e.config);g.collision?(g.landed?e.setLander({...h,landed:!0,velocity:{x:0,y:0},angularVelocity:0,thrust:0,position:{x:h.position.x,y:g.terrainY-15}}):e.setLander({...h,alive:!1,thrust:0}),e.setGameOver(!0)):e.setLander(h)},a=d=>{[" ","ArrowUp","ArrowLeft","ArrowRight","w","a","d"].includes(d.key)&&d.preventDefault(),e.handleKeyDown(d.key)},o=d=>{e.handleKeyUp(d.key)};return nt(()=>{window.addEventListener("keydown",a),window.addEventListener("keyup",o),t=requestAnimationFrame(i)}),De(()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",o),cancelAnimationFrame(t)}),(()=>{var d=_t(),f=d.firstChild,u=f.firstChild,s=u.nextSibling;return L(s,I(ut,{get each(){return e.stars()},children:v=>(()=>{var c=Dt();return R(h=>{var g=v.x,m=v.y,b=v.size,y=`rgba(200, 255, 200, ${v.brightness*.7})`;return g!==h.e&&w(c,"cx",h.e=g),m!==h.t&&w(c,"cy",h.t=m),b!==h.a&&w(c,"r",h.a=b),y!==h.o&&w(c,"fill",h.o=y),h},{e:void 0,t:void 0,a:void 0,o:void 0}),c})()})),L(f,I(Et,{get terrain(){return e.terrain()},get landingPad(){return e.landingPad()},get width(){return e.config.width},get height(){return e.config.height}}),null),L(f,I($t,{get lander(){return e.lander()}}),null),L(d,I(Ot,{get altitude(){return e.altitude()},get speed(){return e.speed()},get verticalSpeed(){return e.verticalSpeed()},get horizontalSpeed(){return e.horizontalSpeed()},get fuel(){return e.lander().fuel},get rotation(){return e.lander().rotation},get autopilotMode(){return e.autopilotMode()},get isLandingZone(){return e.isLandingZone()},get landingStatus(){return e.landingStatus()},get alive(){return e.lander().alive},get landed(){return e.lander().landed}}),null),L(d,I(It,{}),null),R(()=>w(f,"viewBox",`0 0 ${e.config.width} ${e.config.height}`)),d})()};var Gt=_("<div class=app>");const Ut=()=>(()=>{var e=Gt();return L(e,I(Rt,{})),e})(),Ke=document.getElementById("root");if(!Ke)throw new Error("Root element not found");ft(()=>I(Ut,{}),Ke);
    </script>
</body>
</html>
